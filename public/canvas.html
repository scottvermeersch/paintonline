<!DOCTYPE html>
<html>

  <head>
    <title>Canvas</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <style>
    	body {
    		background: gray;
		}
	</style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  	<script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
  	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
	<script type="text/javascript" src="js/jquery.event.drag-2.0.js"></script>
	<script src="http://localhost:4000/socket.io/socket.io.js"></script>
	<script type="text/javascript" src="scripts.js"></script>
	<script type="text/javascript" src="server.js"></script>
  </head>
  
  <body>
  <div class="container">
    <div class="vertical-center-row">
    	<div align="center">
  		<div id="controls">
  		Size:
  		<select id="thickness" class="fixed">
  		<option value="1">1</option>
  		<option value="2">2</option>
  		<option value="3">3</option>
  		<option value="4">4</option>
  		<option value="5">5</option>
  		<option value="10">10</option>
  		<option value="20">20</option>
  		</select>
  		Color:
  		<select id="color" class="fixed">
  		<option value="#AAAAAA">Light Gray</option>
  		<option value="#666666">Dark Gray</option>
  		<option value="#000000">Black</option>
  		<option value="#9BA16C">Tan</option>
  		<option value="#CC8F2B">Orange</option>
  		<option value="#63631D">Brown</option>
  		<option value="#FFFFFF">Erase</option>
  		</select>
  		
  		<canvas id="canvas" width="1000" height="800"></canvas>
  		<script>
			var canvas = document.getElementById("canvas");
			var ctx = canvas.getContext("2d");
			ctx.fillStyle = "white";
			ctx.fillRect(0,0, canvas.width, canvas.height);
		</script>
		<script>
			/*globals io */
/*eslint-env browser, jquery*/
var App;

App = {};


/*
	Init
 */

			App.init = function() {
  			App.canvas = document.createElement("canvas");
  			App.canvas.height = 800;
  			App.canvas.width = 1000;
  			document.getElementsByTagName("article")[0].appendChild(App.canvas);
  			App.ctx = App.canvas.getContext("2d");
  			App.ctx.fillStyle = "solid";
  			App.ctx.strokeStyle = "#bada55";
  			App.ctx.lineWidth = 5;
  			App.ctx.lineCap = "round";
  			App.socket = io.connect("http://localhost:4000");
  			App.socket.on("draw", function(data) {
    			return App.draw(data.x, data.y, data.type);
  			});
  			App.draw = function(x, y, type) {
    			if (type === "dragstart") {
      			App.ctx.beginPath();
      			return App.ctx.moveTo(x, y);
   				} else if (type === "drag") {
      			App.ctx.lineTo(x, y);
      				return App.ctx.stroke();
    			} return App.ctx.closePath();
  			};
			};


			/*
				Draw Events
			 */

			$("canvas").live("drag dragstart dragend", function(e) {
  			var offset, type, x, y;
  			type = e.handleObj.type;
  			offset = $(this).offset();
  			e.offsetX = e.layerX - offset.left;
  			e.offsetY = e.layerY - offset.top;
  			x = e.offsetX;
  			y = e.offsetY;
  			App.draw(x, y, type);
  			App.socket.emit("drawClick", {
    			x: x,
    			y: y,
    			type: type
  			});
		});

		$(function() {
  			return App.init();
		});
		</script>
  		<a href="/" class="btn btn-primary" role="button">Return to Menu</a>
  		</div>
    </div>
    </div>
    </div>
  	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
	<script type="text/javascript" src="js/jquery.event.drag-2.0.js"></script>
	<script src="http://localhost:4000/socket.io/socket.io.js"></script>
	<script type="text/javascript" src="scripts.js"></script>
	<script type="text/javascript" src="server.js"></script>
  </body>
</html>
